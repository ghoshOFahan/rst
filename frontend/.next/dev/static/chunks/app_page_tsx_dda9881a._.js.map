{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahang/OneDrive/Desktop/rst/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport socket from \"../lib/socket\";\nimport WaitingLobby from \"../components/WaitingLobby\";\nimport { userGamestore } from \"../store/userGamestore\";\nimport { useEffect } from \"react\";\nimport GameRoom from \"../components/GameRoom\";\nimport type { GameState } from \"../types/game\";\n\nexport default function RoomPage() {\n  const { gameState, setGameState } = userGamestore();\n\n  // Store gameState updates\n  useEffect(() => {\n    const handler = (state: GameState) => {\n      setGameState(state);\n      localStorage.setItem(\"lastRoomId\", state.roomId);\n      localStorage.setItem(\"lastSocketId\", socket.id);\n    };\n\n    socket.on(\"gameStateUpdate\", handler);\n    socket.on(\"gameError\", (err) => console.error(\"Game error:\", err));\n\n    return () => {\n      socket.off(\"gameStateUpdate\", handler);\n      socket.off(\"gameError\");\n    };\n  }, []);\n\n  // Reconnect properly when socket connects again\n  useEffect(() => {\n    const lastSocketId = localStorage.getItem(\"lastSocketId\");\n    const lastRoomId = localStorage.getItem(\"lastRoomId\");\n\n    const onConnect = () => {\n      if (!gameState && lastSocketId && lastRoomId) {\n        console.log(\"Socket connected â†’ requesting reconnection\");\n        socket.emit(\"reconnectRoom\", lastSocketId);\n      }\n    };\n\n    socket.on(\"connect\", onConnect);\n    return () => socket.off(\"connect\", onConnect);\n  }, []);\n\n  if (!gameState)\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        Loading game...\n      </div>\n    );\n\n  switch (gameState.status) {\n    case \"LOBBY\":\n      return (\n        <WaitingLobby\n          players={gameState.players}\n          roomId={gameState.roomId}\n          maxPlayers={gameState.maxPlayers}\n        />\n      );\n    case \"INGAME\":\n      return <GameRoom />;\n    case \"FINISHED\":\n      return <div>Game Finished!</div>;\n    default:\n      return <div>Unknown game status.</div>;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAKA;;;;;;;;AALA;;;;;;AASe,SAAS;;IACtB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG;IAEpC,0BAA0B;IAC1B,IAAA,0KAAS;8BAAC;YACR,MAAM;8CAAU,CAAC;oBACf,aAAa;oBACb,aAAa,OAAO,CAAC,cAAc,MAAM,MAAM;oBAC/C,aAAa,OAAO,CAAC,gBAAgB,OAAO,EAAE;gBAChD;;YAEA,OAAO,EAAE,CAAC,mBAAmB;YAC7B,OAAO,EAAE,CAAC;sCAAa,CAAC,MAAQ,QAAQ,KAAK,CAAC,eAAe;;YAE7D;sCAAO;oBACL,OAAO,GAAG,CAAC,mBAAmB;oBAC9B,OAAO,GAAG,CAAC;gBACb;;QACF;6BAAG,EAAE;IAEL,gDAAgD;IAChD,IAAA,0KAAS;8BAAC;YACR,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,MAAM,aAAa,aAAa,OAAO,CAAC;YAExC,MAAM;gDAAY;oBAChB,IAAI,CAAC,aAAa,gBAAgB,YAAY;wBAC5C,QAAQ,GAAG,CAAC;wBACZ,OAAO,IAAI,CAAC,iBAAiB;oBAC/B;gBACF;;YAEA,OAAO,EAAE,CAAC,WAAW;YACrB;sCAAO,IAAM,OAAO,GAAG,CAAC,WAAW;;QACrC;6BAAG,EAAE;IAEL,IAAI,CAAC,WACH,qBACE,6LAAC;QAAI,WAAU;kBAAgD;;;;;;IAKnE,OAAQ,UAAU,MAAM;QACtB,KAAK;YACH,qBACE,6LAAC;gBACC,SAAS,UAAU,OAAO;gBAC1B,QAAQ,UAAU,MAAM;gBACxB,YAAY,UAAU,UAAU;;;;;;QAGtC,KAAK;YACH,qBAAO,6LAAC;;;;;QACV,KAAK;YACH,qBAAO,6LAAC;0BAAI;;;;;;QACd;YACE,qBAAO,6LAAC;0BAAI;;;;;;IAChB;AACF;GA3DwB;KAAA","debugId":null}}]
}