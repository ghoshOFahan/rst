{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ahang/OneDrive/Desktop/rst/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport socket from \"../lib/socket\";\nimport WaitingLobby from \"../components/WaitingLobby\";\nimport { userGamestore } from \"../store/userGamestore\";\nimport { useEffect } from \"react\";\nimport GameRoom from \"../components/GameRoom\";\nimport type { GameState } from \"../types/game\";\n\nexport default function RoomPage() {\n  const { gameState, setGameState } = userGamestore();\n\n  // Store gameState updates\n  useEffect(() => {\n    const handler = (state: GameState) => {\n      setGameState(state);\n      localStorage.setItem(\"lastRoomId\", state.roomId);\n      localStorage.setItem(\"lastSocketId\", socket.id);\n    };\n\n    socket.on(\"gameStateUpdate\", handler);\n    socket.on(\"gameError\", (err) => console.error(\"Game error:\", err));\n\n    return () => {\n      socket.off(\"gameStateUpdate\", handler);\n      socket.off(\"gameError\");\n    };\n  }, []);\n\n  // Reconnect properly when socket connects again\n  useEffect(() => {\n    const lastSocketId = localStorage.getItem(\"lastSocketId\");\n    const lastRoomId = localStorage.getItem(\"lastRoomId\");\n\n    const onConnect = () => {\n      if (!gameState && lastSocketId && lastRoomId) {\n        console.log(\"Socket connected â†’ requesting reconnection\");\n        socket.emit(\"reconnectRoom\", lastSocketId);\n      }\n    };\n\n    socket.on(\"connect\", onConnect);\n    return () => socket.off(\"connect\", onConnect);\n  }, []);\n\n  if (!gameState)\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        Loading game...\n      </div>\n    );\n\n  switch (gameState.status) {\n    case \"LOBBY\":\n      return (\n        <WaitingLobby\n          players={gameState.players}\n          roomId={gameState.roomId}\n          maxPlayers={gameState.maxPlayers}\n        />\n      );\n    case \"INGAME\":\n      return <GameRoom />;\n    case \"FINISHED\":\n      return <div>Game Finished!</div>;\n    default:\n      return <div>Unknown game status.</div>;\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAKA;;;;;;AALA;;;;;;;AASe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,YAAY,EAAE,GAAG;IAEpC,0BAA0B;IAC1B,IAAA,kNAAS,EAAC;QACR,MAAM,UAAU,CAAC;YACf,aAAa;YACb,aAAa,OAAO,CAAC,cAAc,MAAM,MAAM;YAC/C,aAAa,OAAO,CAAC,gBAAgB,OAAO,EAAE;QAChD;QAEA,OAAO,EAAE,CAAC,mBAAmB;QAC7B,OAAO,EAAE,CAAC,aAAa,CAAC,MAAQ,QAAQ,KAAK,CAAC,eAAe;QAE7D,OAAO;YACL,OAAO,GAAG,CAAC,mBAAmB;YAC9B,OAAO,GAAG,CAAC;QACb;IACF,GAAG,EAAE;IAEL,gDAAgD;IAChD,IAAA,kNAAS,EAAC;QACR,MAAM,eAAe,aAAa,OAAO,CAAC;QAC1C,MAAM,aAAa,aAAa,OAAO,CAAC;QAExC,MAAM,YAAY;YAChB,IAAI,CAAC,aAAa,gBAAgB,YAAY;gBAC5C,QAAQ,GAAG,CAAC;gBACZ,OAAO,IAAI,CAAC,iBAAiB;YAC/B;QACF;QAEA,OAAO,EAAE,CAAC,WAAW;QACrB,OAAO,IAAM,OAAO,GAAG,CAAC,WAAW;IACrC,GAAG,EAAE;IAEL,IAAI,CAAC,WACH,qBACE,8OAAC;QAAI,WAAU;kBAAgD;;;;;;IAKnE,OAAQ,UAAU,MAAM;QACtB,KAAK;YACH,qBACE,8OAAC;gBACC,SAAS,UAAU,OAAO;gBAC1B,QAAQ,UAAU,MAAM;gBACxB,YAAY,UAAU,UAAU;;;;;;QAGtC,KAAK;YACH,qBAAO,8OAAC;;;;;QACV,KAAK;YACH,qBAAO,8OAAC;0BAAI;;;;;;QACd;YACE,qBAAO,8OAAC;0BAAI;;;;;;IAChB;AACF","debugId":null}}]
}